<!DOCTYPE html>
<html>
<head>
  <title>Soulmate Calculator</title>
  <!-- Include Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h1>It's cuffing season!</h1>
  <h1>Answer a few questions to figure out the chance of finding your soulmate</h1>

  <label for="numberInput1">number 1</label>
  <input type="number1" id="numberInput1">
  <label for="numberInput2">number 2</label>
  <input type="number2" id="numberInput2">
  <label for="numberInput3">number 3</label>
  <input type="number3" id="numberInput3">
  <button onclick="generateHistogram()">generate button (does nothing)</button>

  <canvas id="histogramChart" width="400" height="200"></canvas>
  <div id="container"></div>

  <script type="module">

    import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";

    // const ageandincomedata = await d3.csv("data/ageandincome2022.csv");
    const ageandsexdata = await d3.csv("data/ageandsex2022.csv");
    const popprofilehousingdata = await d3.csv("data/popprofilehousing2020.csv");
    const weightsdata = await d3.csv("data/weights.csv");

    const csvData = `Label (Grouping),United States!!Estimate,United States!!Margin of Error
    Total:,129870928,±136261
    Householder under 25 years:,5335083,±45029
    Less than $10,000,718818,±21013
    $10,000 to $14,999,291056,±12415
    $15,000 to $19,999,258998,±11390
    $20,000 to $24,999,315881,±11940
    $25,000 to $29,999,296331,±12040
    $30,000 to $34,999,341999,±12241
    $35,000 to $39,999,294764,±10978
    $40,000 to $44,999,315664,±11889
    $45,000 to $49,999,243175,±10676
    $50,000 to $59,999,474780,±15457
    $60,000 to $74,999,574788,±15418
    $75,000 to $99,999,578015,±15537
    $100,000 to $124,999,300929,±10982
    $125,000 to $149,999,140104,±8362
    $150,000 to $199,999,111129,±7058
    $200,000 or more,78652,±6817
    Householder 25 to 44 years:,42774390,±75253
    Less than $10,000,1951920,±33463
    $10,000 to $14,999,926285,±19393
    $15,000 to $19,999,800098,±20245
    $20,000 to $24,999,1095127,±21918
    $25,000 to $29,999,1159690,±26194
    $30,000 to $34,999,1466250,±24211
    $35,000 to $39,999,1355753,±24372
    $40,000 to $44,999,1564254,±21943
    $45,000 to $49,999,1386158,±24249
    $50,000 to $59,999,3006782,±33770
    $60,000 to $74,999,4305239,±43354
    $75,000 to $99,999,6153740,±46932
    $100,000 to $124,999,4936590,±44322
    $125,000 to $149,999,3482583,±33082
    $150,000 to $199,999,4182808,±35491
    $200,000 or more,5001113,±37641
    Householder 45 to 64 years:,46282807,±57239
    Less than $10,000,2298892,±25659
    $10,000 to $14,999,1497958,±21787
    $15,000 to $19,999,1113994,±19310
    $20,000 to $24,999,1190739,±19259
    $25,000 to $29,999,1202878,±18114
    $30,000 to $34,999,1347782,±21469
    $35,000 to $39,999,1291127,±21541
    $40,000 to $44,999,1421107,±20279
    $45,000 to $49,999,1281853,±20536
    $50,000 to $59,999,2758946,±28588
    $60,000 to $74,999,3918418,±33163
    $75,000 to $99,999,5849072,±43239
    $100,000 to $124,999,4933555,±37647
    $125,000 to $149,999,3731699,±36576
    $150,000 to $199,999,5062628,±43444
    $200,000 or more,7382159,±45106
    Householder 65 years and over:,35478648,±56689
    Less than $10,000,2149924,±26984
    $10,000 to $14,999,2120073,±23754
    $15,000 to $19,999,2025934,±25671
    $20,000 to $24,999,2012195,±18799
    $25,000 to $29,999,1846766,±21882
    $30,000 to $34,999,1763352,±19519
    $35,000 to $39,999,1653876,±18433
    $40,000 to $44,999,1579886,±17102
    $45,000 to $49,999,1446731,±19720
    $50,000 to $59,999,2693233,±21947
    $60,000 to $74,999,3363896,±33578
    $75,000 to $99,999,4069942,±31602
    $100,000 to $124,999,2682639,±23200
    $125,000 to $149,999,1736903,±23430
    $150,000 to $199,999,1916446,±21836
    $200,000 or more,2416852,±24717
    `;

    // Split the CSV data into lines
    const lines = csvData.trim().split('\n');

    // Extract column names and data
    const columns = lines[0].split(',');
    const data = lines.slice(1).map(line => line.split(','));

    // Create an array of objects
    const dataArray = data.map(values => {
      const obj = {};
      columns.forEach((column, index) => {
        obj[column] = values[index];
      });
      return obj;
    });

    // Log the array of objects
    console.log('age and income data: ', dataArray);

    // console.log('ageandincomedata: ', ageandincomedata)
    // console.log('ageandincomedata[United States]: ', ageandincomedata["United States"])
    // console.log('ageandincomedata["Estimate!!Total:!!Householder 25 to 44 years:!!$10,000 to $14,999"]: ', ageandincomedata["Estimate!!Total:!!Householder 25 to 44 years:!!$10,000 to $14,999"])
    
    
    // Declare the chart dimensions and margins.
    const width = 640;
    const height = 400;
    const marginTop = 20;
    const marginRight = 20;
    const marginBottom = 30;
    const marginLeft = 40;
    
    // Declare the x (horizontal position) scale.
    const x = d3.scaleUtc()
        .domain([new Date("2023-01-01"), new Date("2024-01-01")])
        .range([marginLeft, width - marginRight]);
    
    // Declare the y (vertical position) scale.
    const y = d3.scaleLinear()
        .domain([0, 100])
        .range([height - marginBottom, marginTop]);
    
    // Create the SVG container.
    const svg = d3.create("svg")
        .attr("width", width)
        .attr("height", height);
    
    // Add the x-axis.
    svg.append("g")
        .attr("transform", `translate(0,${height - marginBottom})`)
        .call(d3.axisBottom(x));
    
    // Add the y-axis.
    svg.append("g")
        .attr("transform", `translate(${marginLeft},0)`)
        .call(d3.axisLeft(y));
    
    // Append the SVG element.
    container.append(svg.node());
    
    </script>
</body>
</html>
